{{- if .Values.stackgres.enabled -}}
apiVersion: stackgres.io/v1
kind: SGPoolingConfig
metadata:
  labels: {{ include "hedera-mirror.labels" . | nindent 4 }}
  name: {{ include "hedera-mirror.stackgres" . }}
  namespace: {{ include "hedera-mirror.namespace" . }}
spec:
  pgBouncer:
    pgbouncer.ini:
      pgbouncer:
        default_pool_size: "1000"
        ignore_startup_parameters: extra_float_digits,options,statement_timeout
        max_client_conn: "1000"
        max_db_connections: "0"
        max_user_connections: "0"
        pool_mode: session
{{- end -}}
